# ZeroJR
Discord bot for create server bumps


Инструкция по запуску бота:
1. Добавить файл .env с содержимым вида "TOKEN = {Ваш токен}"
2. Запустить main.py

Функции бота:
1. Делать дамп сервера и записывать его в .pkl файл
2. Выгружать дамп на сервер из .pkl файла
3. Очищать ветки/каналы/категории
4. Выводить забавные сообщения в консоль во время работы


Для безумца, который решит зайти в код:
Бот релизован на pycorde (https://docs.pycord.dev/en/stable/) и pickle (https://docs.python.org/3/library/pickle.html) и состоит из трёх основных частей:
- main
CLI

- builder
Выгружает дамп из файла на сервер. Представляет из себя набор классов, каждый из которых ответчает за создание на сервере соответсвующих объектов (веток, каналов и категорий).

- record
Главная задача - изменение класса объекта с Дискорд класса на собственный. Сделано, чтобы избежать циклические ссылки, потому что Pickle с ними не дружит. Мы просто берём объект и создаём его копию, перенося интересующие нас поля. Всё, что касается цикличных ссылок, игнорируется.
Среди методов во всех кастомных классах для объектов дискорда наиболее непонятным выглядит avisitor(). Одна из его задач - двигаться вниз по дереву (от категорий - в каналы, от каналов - в ветки) и взаимодействовать с объектами, требующими асинхронность. Из комментария в коде: "Это нужно для того, чтобы заполнить массив thread.members, вызвав thread.fetch_members(), которому нужен await". Указанная конструкция позволила добавлять в ветку пользователей, имеющих к ней отношение при сохранении этой ветки в файл.