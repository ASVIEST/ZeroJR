# ZeroJR
Discord bot for create server bumps



## Инструкция по запуску бота:

1. Добавить файл .env с содержимым вида "TOKEN = {Ваш токен}"
2. Установить зависимости
3. Запустить main.py



## Функции бота:

1. Дампить сервер в .pkl файл
2. Выгружать дамп на существующий Дискорд сервер из .pkl файла
3. Очищать ветки/каналы/категории/эмодзи
4. Выводить забавные сообщения в консоль во время работы



## Консольные команды:

1. **create** {id сервера}
2. **load** {id сервера} {файл с дампом}
3. **clear** {id сервера} all/threads/channels/categories/emojis



## Для безумца, который решит зайти в код:

Бот релизован на pycorde (https://docs.pycord.dev/en/stable/) и pickle (https://docs.python.org/3/library/pickle.html) и состоит из трёх основных частей:

- **main.py** - CLI

- **builder.py** - Представляет из себя набор классов, каждый из которых ответчает за создание на сервере соответсвующих объектов (веток, каналов и категорий).

- **record.py** - Главная задача - создание объектов для записи в файл. Стандартные классы Discord создают циклические отссылки друг на друга, а Pickle с ними не дружит и зависает.
Среди методов у объектов для записи в файл наиболее непонятным выглядит avisitor(). Одна из его задач - двигаться вниз по дереву (от категорий - в каналы, от каналов - в ветки) и взаимодействовать с объектами, требующими асинхронность. Пример из комментария в коде: "Это нужно для того, чтобы заполнить массив thread.members, вызвав *thread.fetch_members()*, которому нужен *await*". Указанная конструкция позволила добавлять в ветку пользователей, имеющих к ней отношение при сохранении этой ветки в файл.